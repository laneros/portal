<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="admin" template="forum_edit" modification_key="laneros_portal_forum_edit" description="Adds auto feature checkbox to the forum_edit template" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:option name="allow_posting"]]></find>
    <replace><![CDATA[<xf:option name="laneros_portal_auto_feature" selected="$forum.laneros_portal_auto_feature"
	label="Automatically feature threads in this forum"
	hint="If selected, any new threads posted in this forum will be automatically featured." />
$0]]></replace>
  </modification>
  <modification type="public" template="helper_thread_options" modification_key="laneros_portal_helper_thread_options" description="Adds &quot;Featured&quot; checkbox to the helper_thread_options template" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:if is="$thread.canLockUnlock()">]]></find>
    <replace><![CDATA[<xf:if is="($thread.isInsert() AND !$thread.Forum.laneros_portal_auto_feature AND $thread.canFeatureUnfeature())
	OR ($thread.isUpdate() && $thread.canFeatureUnfeature())"
>
	<xf:option label="Featured" name="featured" value="1" selected="{$thread.laneros_portal_featured}">
		<xf:hint>Featured threads will appear on the Portal page.</xf:hint>
		<xf:afterhtml>
			<xf:hiddenval name="_xfSet[featured]" value="1" />
		</xf:afterhtml>
	</xf:option>
</xf:if>
$0]]></replace>
  </modification>
</template_modifications>
